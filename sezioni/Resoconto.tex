\section{Resoconto dello stage}
\subsection{Pianificazione di progetto}
\subsubsection{Descrizione generale}
Come gia' detto in precedenza, lo stage e' stato suddiviso in due parti: la prima orientata alla formazione su strumenti e tecnologie e la seconda parte orientata alla realizzazione di progetti destinati ai clienti esterni. Come tale, l’attività di formazione e' stata opportunamente orientata all’apprendimento, da parte mia, delle meccaniche e delle norme vigenti internamente per lo sviluppo di tali progetti, oltre che alla normale parte di formazione tecnica prevista per portare a termine in maniera opportuna le attività dei progetti stessi.
L’obiettivo finale dello stage e' stato quindi quello di inserirmi come parte integrante del team di sviluppo per i progetti esterni, attribuendomi responsabilità e compiti adeguati al mio ruolo e orientati alle attività di produzione, testing e delivery di app mobile di Realtà Aumentata; la valutazione finale da parte del tutor aziendale e' stata quindi effettuata sulla base sia della qualità sia della quantità delle attività portate a termine nella fase produttiva finale, oltre che alla capacità di lavorare correttamente in squadra con l’obiettivo comune di consegnare un prodotto finale nei tempi e nelle modalità stabilite.
\\\\
Nel periodo antecedente l'inizio dello stage, insieme al tutor aziendale, sono state concordate le attivita' principali che avrei dovuto svolgere durante il periodo seguente della durata di 2 mesi. Nella descrizione delle attivita', riportata nella sezione successiva, e' stata fornita una descrizione molto generica per quanto riguarda il progetto principale che avrei dovuto seguire in quanto non era ancora chiaro a priori se ci sarebbe stata o meno la possibilita' di seguire un progetto commissionato dall'esterno.
\\\\
La dislocazione temporale delle attivita e' stata rappresentata graficamente in un Diagramma di Gantt che mi ha aiutato ad avere sempre una visione accurata sullo stato del mio stage, in particolare su eventuali ritardi. Rispetto al diagramma concordato nel piano di lavoro, il mio stage e' partito dopo 2 giorni rispetto a quanto concordato a causa di un'indisponibilita' del tutor aziendale, per cui e' stata rifatta la pianificazione tenendo conto di questo ritardo.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{\docsImg Gantt.png}
	\caption{Diagramma di Gantt delle attivita'}
	\label{fig:Diagramma di Gantt delle attivita'}
\end{figure}

Il Diagramma di Gantt riportato in figura \ref{fig:Diagramma di Gantt delle attivita'} mostra piuttosto fedelmente quanto svolto durante il periodo in azienda ed eventuali anticipi sulla tabella di marcia sono stati riempiti con approfondimenti sulle tecnologie e sessioni di ricerca e sviluppo su visori Google Cardboard. Non ci sono stati, invece, ritardi su quanto preventivato.

\subsubsection{Dettaglio delle attivita'}
Di seguito vengono elencate in dettaglio le attivita' svolte durante il periodo di stage svolto presso l'azienda ospitante Experenti. Un approfondimento per le principali. 

\begin{enumerate}
	\item	Formazione sulle tecnologie utilizzate internamente per lo sviluppo, quali framework e SDK. In particolare:
	
	\begin{enumerate}	
		\item	Ambiente di sviluppo (IDE) utilizzato (Unity3D) e fondamenti dei sistemi operativi mobile (Android e iOS); 
		\item	Formazione sulle librerie utilizzate internamente per l’elaborazione delle immagini per la realtà aumentata e per il successivo riconoscimento delle stesse in ambiente mobile; 
		\item	Formazione sull’app Experenti: nascita del progetto, funzionamento attuale, obiettivi di sviluppo. Formazione sulle procedure standard applicate internamente.	
	\end{enumerate}
	
	\item	Realizzazione di un esempio di contenuto in Realtà Aumentata a tema libero. Questo contenuto, il cui sviluppo è stato necessario alla comprensione del flusso di lavoro interno e all'individuazione di determinate problematiche relative all’ambito AR mobile, ha particolari caratteristiche, quali animazioni e/o movimenti di parti specifiche, un certo grado di interattività e prevede parti semplici di grafica GUI (su schermo, in modalità HUD). E' stata richiesta, inoltre, l’individuazione di un tag adatto al riconoscimento dalle fotocamere mobile, possibilmente legato alla tematica che e' stata sviluppata.
	\item	Analisi di casi di studio e app varie già realizzate internamente. Focus particolare sui progetti base già realizzati e sulla loro struttura: progetto base demo, progetto base visore AR, progetto base configuratore. In questa fase e' avvenuta la formazione sul flusso di lavoro standard interno all’azienda e sul normale iter di un progetto commissionato da un cliente, dalla ricezione dei materiali fino alla fase di distribuzione (sia essa una distribuzione ad hoc o una distribuzione pubblica tramite Store mobile) ed e' iniziato l'affiancamento al Project Manager nelle fasi di accettazione materiali. 
	\item	Realizzazione di un’app demo completa. Per app demo si intende un’app a distribuzione solitamente ad hoc (non pubblicata sugli Store) resa disponibile dall’azienda per i propri clienti o reseller, comprendente un numero solitamente limitato di contenuti semplici (3D o video) fruibili dall’utente in realtà aumentata attraverso l’uso di un tag fornito dal cliente stesso. L’app possiede, inoltre, una GUI minimale ma personalizzata con il logo del cliente stesso, nonchè un’icona e una splashscreen anch’esse personalizzate allo stesso modo. Richiesto l'affiancamento al Project Manager fin dalla fase iniziale di ricezione materiali, e prosecuzione poi in autonomia nella fase di sviluppo fino alla fase di rilascio e consegna (previa verifica del risultato prodotto da parte del Tutor Aziendale). L’entità dell’app demo e' stata stabilita dal Project Manager aziendale alcuni giorni prima dell’inizio di questa fase e si e' data preferenza, alla produzione di una demo per un cliente esterno. 
	\item	Inserimento effettivo nel team di sviluppo per i progetti esterni. In questa fase, inizia l'affiancamento al team di sviluppo per i progetti commissionati dai clienti esterni; e' iniziato quindi il coordinamento dal Project Manager aziendale nell’assegnazione di task appositi comprendenti le fasi di sviluppo e testing di intere app semplici o parti di app complesse; si e' preferito assegnare la realizzazione di almeno un’app semplice nella sua interezza commissionata da un cliente esterno. L’assegnazione delle attività e' stato effettuato attraverso il sistema di ticketing utilizzato internamente all’azienda, attraverso il quale e' stato anche richiesto di rendicontare le proprie attività in termini di tempo utilizzato per ciascuna di esse, mentre l’assegnazione dei singoli task e' stata effettuato dal Project Manager aziendale in collaborazione con il tutor aziendale. E' stato valutato positivamente in questa fase la capacità di attenersi alle tempistiche date e il livello di dettaglio fornito nella successiva rendicontazione delle ore, oltre ovviamente alla qualità intrinseca del risultato prodotto. 
\end{enumerate}

\begin{center}
	
	\begin{longtable}{c| p{0.7\textwidth}| c}

		\textbf{Sezione} & \textbf{Descrizione} & \textbf{Ore di lavoro}\\ \cline{1-3}
		\phantomsection
		1.1&  Formazione su ambienti di sviluppo&  40 \\
				\phantomsection
		1.2&  Formazione su librerie utilizzate&  28 \\
				\phantomsection
		1.3&  Formazione sull’app Experenti&  12 \\
				\phantomsection
		2&  Realizzazione di un contenuto di realtà aumentata a tema libero&   56\\	
				\phantomsection
		3&  Analisi su progetti già realizzati internamente e formazione su flusso di lavoro interno&   40\\
				\phantomsection	
		4&  Realizzazione di un’app demo completa&   24\\
				\phantomsection					
		5&  Inserimento nel team di sviluppo e realizzazione di un’app nella sua interezza&   120\\ \cline{1-3}
				\phantomsection
		  & \textbf{TOTALE} & \textbf{320}  \\\\
		  		\caption{Tabella relativa alle ore dedicate per ciascuna attivita'}\\
	\end{longtable}
		
\end{center}

\subsection{Studio delle tecnologie e strumenti}
In questa sezione, vengono spiegate le attivita' di apprendimento svolte per imparare l'utilizzo delle nuove tecnologie e degli strumenti usati.
\subsubsection{Unity 3D}
Unity, come gia' detto in precedenza e' un sistema cross-platform per lo sviluppo di giochi composto da un game engine e da un IDE integrato. Unity viene usato internamente all'azienda per lo sviluppo di app mobile distribuite su Android e iOS.
\\
Unity nel suo sito fornisce un grosso supporto agli sviluppatori fornendo una documentazione completa e una sezione ben fornita di tutorial testuali e video suddivisi per categoria.\\
Inizialmente, ho dovuto seguire una parte di video tutorial riguardanti l'interfaccia di Unity, lo scripting, la gestione della fisica, animazioni e gestione della GUI. Questa primo periodo si e' svolto integrando, oltre alla visione, anche la prova diretta sull'editor in modo da assimilare meglio i concetti appresi.\\
Nel caso in cui volessi approfondire un argomento oppure non lo ritenessi abbastanza chiaro, avevo sempre la possibilita' di ottenere una spiegazione da parte del tutor aziendale, il quale si e' dimostrato sempre molto disponibile anche nel ripetere piu' volte lo stesso concetto.\\
In questa parte di formazione, dopo aver seguito e implementato un tutorial riguardante l'animazione di un avatar, di mia iniziativa, ho effettuato il porting dell'applicazione su Android gestendo touch e multi-touch sullo schermo e impostando i movimenti dell'avatar basandoli sull'acelerometro del dispositivo mobile.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{\docsImg tutorial.jpg}
	\caption{Implementazione in Unity del tutorial riguardante l'animazione di un avatar 3D di cui successivamente e' stato eseguito il porting su Android}
	\label{fig:tutorial riguardante l'animazione di un avatar 3D}
\end{figure}
 
\subsubsection{Vuforia SDK}
Terminata la parte di formazione su Unity 3D, e' iniziata la parte di preparazione relativa a Vuforia SDK, l'SDK utilizzato dall'azienda per l'implementazione della realta' aumentata. Nello specifico, il team tecnico si e' occupato di spiegarmi come funziona l'SDK, e come funziona nello specifico il plugin di Unity, grazie alla quale è possibile operare all’interno di un unico ambiente di lavoro. Le attivita' principali svolte in questo lasso di tempo sono state l'implementazione di modelli 3D e di video associati ai tag, e lo studio sul riconoscimento e la creazione di tag ottimali.

\subsubsection{Photon Unity Networking}
Photon Unity Networking (PUN) e' un framework di Unity per l'implementazione del multiplayer realtime neigiochi o nelle applicazioni sviluppate. Le applicazioni svilupapte con Photon vengono eseguite su un server cloud proprietario. Quindi, le operazioni di scaling e di service hosting sonogestite interamente da PUN, permettendo allo sviluppatore di concentrarsi puramente sulla costruzione dell'applicazione. Tutti i prodotti Photon Cloud sono basati su un'architettura client-to-server, che e' la soluzione ottimale per il gaming onlire rispetto a una connessione peer-to-peer.\\
Photon e' un package scaricabile dall'Asset Store (negozio di Unity online in cui comprare o scaricare gratuitamente asset come script, modelli 3D e 2D, etc.), e nella sua versione gratuita prevede l'accesso concorrente fino a 20 utenti sulla stessa stanza. \\\\
Di seguito vengono riportati esempi di codice per mostrare la semplicita' di utilizzo del framework.\\
\begin{itemize}
	\item \textbf{Connessione al server}: La connessione al server si basa sul passaggio di una stringa contenente la versione dell'applciazione. Puo' essere usata per dividere gruppi di client.
\begin{lstlisting}
PhotonNetwork.ConnectUsingSettings("1.0");
\end{lstlisting}

	\item \textbf{Accesso a una stanza}: Per prendere parte a una partita esistente basta la seguente riga di codice specificando il nome della stanza in cui si vuole entrare.
\begin{lstlisting}
PhotonNetwork.JoinRoom("RoomName");
\end{lstlisting}

	\item \textbf{Creare una stanza}: per creare una stanza basta fornire il nome, dare la possibilita' o meno di essere trovata da altri utenti, fornire la possibilita' agli altri di entrare, e il numero massimo di giocatori.
\begin{lstlisting}
public void OnConnectedToMaster()
{
	PhotonNetwork.CreateRoom("RoomName", true, true, 4);
}

\end{lstlisting}	
	
\end{itemize}

Lo studio di Photon Unity Networking non mi e' stato imposto dall'azienda, ma e' stato un approfondimento che ho voluto fare di mia iniziativa per lo sviluppo dell'esempio di contenuto in realta' aumentata a tema libero di cui parlero' successivamente.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{\docsImg Photon.png}
	\caption{Architettura generale del framework Photon Unity Networking}
	\label{fig:Architettura generale del framework Photon Unity Networking}
\end{figure}

PUN si e' dimostrato uno strumento molto potente e relativamente di facile utilizzo. Creare un semplice scambio di dati tra diversi client e' risultato piuttosto semplice. Il livello di difficolta' e' salito quando ho cercato di aumentare il numero di informazioni passate e il numero di oggetti da "osservare". Essendo uno studio non richiesto dall'azienda, ho preferito non spendere troppo tempo in approfondimenti ma piuttosto avere un'idea chiara del funzionamento di base.

\subsubsection{Esempio di contenuto in realta' aumentata a tema libero}
Come ultimo passo a compimento del percorso di preparazione tecnologica e strumentale, e prima di iniziare la realizzazione del progetto principale di stage, mi e' stato chiesto di sviluppare un'applicazione completa con dei contenuti non banali in realta' aumentata. Cio' che mi e' stato reso disponibile per la realizzazione dell'app oltre a Unity 4.6.3 e Vuforia SDK 4, sono stati anche tutti i contenuti gratuiti disponibili sull'Asset Store. Ho quindi proceduto con un'accurata scansione dei contenuti scaricabili trovando cio' che fosse piu' utile per dare luce all'idea ins tato embrionale che avevo in mente.\\\\
Quello che stavo cercando erano dei modelli 3D in stile "cartoon" per lo sviluppo di un videogioco sparatutto multiplayer in realta' aumentata.\\
L'idea che volevo implementare era dare la possibilita' a piu' utenti di interagire sullo stesso tag, e rendere tali interazioni visibili ad utenti che si trovassero dall'altra parte del mondo. La prima idea che mi era venuta, era quella di gestire un oggetto 3D e dare la possibilita' di modificarne la struttura, il colore e la scala agli utenti, in modo che i cambiamenti fossero visibili a tutti gli utenti in osservazione su quel dato tag. Questo pero' non mi e' bastato, in quanto volevo vedere fino a che punto si poteva spingere un device Android con il rendering di contenuti in realta' aumentata. Per cui la realizzazione di un gioco mi sembrava perfetta per testare questi due aspetti.\\

Come gia' detto ho effettuato uno studio di Photon Unity Networking per l'implementazione del multiplayer e successivamente ho proceduto con una semplice progettazione architetturale e con l'implementazione vera e propria.\\

La prima cosa fatta e' stata la realizzazione della mappa di gioco, cercando di renderla il piu' simmetrica possibile in modo da non sfavorire nessuno dei due giocatori e creando delle barriere invisibili per non permettere ai giocatori di poter uscire dallo scenario.\\
Il passo successivo e' stato quello di creare dei punti di respawn e di gestire la nascita dei giocatori in modo casuale sulla mappa. Avendo trovato sull'Asset Store un modello 3D gia' in possesso di animazioni e script che simulassero un soldato cartoon vero e proprio, non ho dovuto occuparmid ella gestione dell'avatar.\\
Una volta creati e gestiti i punti di respawn, e' iniziato il lavoro di configurazione della lobby (contenitore di stanze) in primo luogo, e delle stanze successivamente, fornendo la possibilita' ai giocatori di creare la propria stanza e di vedere le stanze create dagli altri giocatori. Per la lobby e' stata creata una schermata iniziale apposita di scelta dello username e di creazione nuova stanza o accesso a una stanza gia' creata.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{\docsImg cot3.jpg}
	\caption{Schermata iniziale di Call Of Toony con Lobby}
	\label{fig:Schermata iniziale di Call Of Toony con Lobby}
\end{figure}

Inseguito, sono stati gestiti gli script relativi al passaggio dei dati attraverso la rete. In particolare i dati passati sono:

\begin{itemize}
	\item posizione e rotazione dei personaggi rispetto alla mappa;
	\item percentuale di salute rimasta sulla health bar;
	\item bersaglio colpito e chi ha colpito il bersaglio.
\end{itemize}

La gestione di questi dati ha permesso la gestione di un gioco basilare, in cui successivamente e' stata applicata un'area in cui rappresentare i log della partita, quali: spawn dei giocatori e le uccisioni avvenute. Inoltre, localmente e' stato reso disponibile il numero di morti del proprio personaggio, mentre non c'e' stato abbastanza tempo per gestire anche il numero di uccisioni.\\\\
Il risultato e' stato un gioco fluido e ben strutturato, in grado di gestire il multiplayer ad una latenza bassissima e in grado di coinvolgere il giocatore in un'esperienza nuova e unica. I problemi riscontrati sono dovuti unicamente ai device, i quali a lungo termine presentano surriscaldamento, consumo elevato di batteria e un calo di frame per secondo.\\
Il progetto e' piaciuto molto al team tecnico, che non ha escluso la possibilita', dopo un'accurata ottimizzazione, di un inserimento del contenuto in realta' aumentata all'interno dell'app Experenti.\\
Il nome del gioco e' \textbf{Call Of Toony}, in richiamo a titoli videoludici del genere ben piu' noti.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{\docsImg cot1.jpg}
	\caption{Call Of Toony - multiplayer su device diversi}
	\label{fig:Call Of Toony - multiplayer}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{\docsImg cot2.jpg}
	\caption{Call Of Toony - schermata di gioco}
	\label{fig:Call Of Toony - schermata di gioco}
\end{figure}

\subsection{Svolgimento delle attivita'}
Inizia ora la stesura di quanto svolto nel progetto vero e proprio, ripercorrendo tutte le fasi del ciclo di vita del software sviluppato fino al suo rilascio sui vari store. Per lo svolgimento del progetto sono state previste circa 120 ore inserite all'interno dell'orario di lavoro aziendale, dal lunedi al venerdi.\\
Il nome dell'applicazione da sviluppare e' Cora' Parquet Live.\\
Lo studio di fattibilita' e' stato fatto dal Project Manager insieme a un collega del reparto tecnico, ed io non ne ho potuto prendere parte.

\subsubsection{Il cliente}
Prima di procedere con gli aspetti tecnici e' bene avere una panoramica su chi e' il cliente che ha commissionato la realizzazione del progetto, quale target di pubblico punta a raggiungere e quali sono le sue aspettative.
\\\\
Il cliente in questione e' \textbf{Cora' Divisione Parquet}, una divisione dell'azienda \textbf{Cora' Legnami}, nata nel 1919. Cora' Parquet e' specializzata nella realizzazione di pavimenti in legno e realizza pavimentazioni per ambienti interni, ambienti esterni e spazi pubblici. L'azienda, leader nel settore, punta a raggiungere i suoi clienti attraverso canali innovativi grazie alla spinta al ringiovanimento voluta da Ettore Cora', amministratore delegato presso Cora' Domenico \& Figli SpA.\\
La richiesta del cliente era la realizzazione di un configuratore in realta' aumentata di pavimentazioni in legno, in grado di essere utilizzato inizialmente a scopo fieristico e successivamente utilizzabile dai clienti finali dell'azienda in modo da avere uno strumento in grado di fare provare le varie linee di prodotto direttamente nelle case dei possibili clienti.\\
Uno degli obiettivi era quello di fare scaturire nel possibile cliente cio' che viene chiamato "fattore wow", lasciando sbalordito il cliente e consolidando nella sua mente la propensione dell'azienda verso l'innovazione e il miglioramento.
Il secondo obiettivo e' dato dal fatto che un'applicazione di un tale livello innovativo inevitabilmente produce un passaparola dagli utenti verso chi ancora non ha visto l'applicazione, generando quindi pubblicita' e maggiore visibilita' all'azienda.\\
Per generare questo "effetto wow", Cora' ha deciso di farsi realizzare un modello tridimensionale di una pin-up con un vestito dilegno. Questo avatar avrebbe dovuto presentare le varie linee di prodotto ed eseguire una introduzione all'applicazione. Il modello e le animazioni non sono state realizzate internamente all'azienda ma sono state delegate a terzi.\\\\
Infine, per quanto riguarda il target dell'app, ci si voleva rivolgere all'utente medio, in grado di poter stampare autonomamente il tag a casa propria. Visto che l'utente finale avrebbe dovuto essere la cosiddetta "signora Maria", ossia un utente senza particolare propensione per tecnicismi informatici e tecnologia in generale, l'applicazione doveva avere un elevato grado di usabilita' e doveva guidare l'utente passo passo.

\subsubsection{Analisi dei requisiti}
Nella metodologia Agile, l'insieme totale dei requisiti e' ottenibile esclusivamente nelle ultime iterazioni, o comunque a progetto quai ultimato. Questo perche' l'obiettivo principale del modello Agile e' quello di ottenere il massimo soddisfacimento del cliente nei tempi e nei costi preventivati.\\
Alcuni aspetti di rifinitura sono stati quindi concordati in iterazioni intermedie, e sono stati accettati anche se cambiavano molto la struttura del progetto, purche' comunque non si avesse un totale stravolgimento di quanto fatto fino a quel punto.\\
Dopo un'attenta analisi iniziale, sono stati estrapolati i casi d'uso principali dalle richieste del committente, da uno studio sull'utenza finale e basandosi sull'user story.\\
L'analisi dei requisiti e' stata svolta insieme alla Project Manager, la quale a mantenuto i contatti con il responsabile d'azienda esterno per tutta la durata del progetto. Insieme a lei abbiamo stilato una lista di funzionalita' prioritarie e una lista, invece, di requisiti desiderabili e opzionali.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{\docsImg casi.png}
	\caption{Diagramma dei casi d'uso generico relativo all'applicazione Cora' Parquet Live}
	\label{fig:Diagramma dei casi d'uso generico relativo all'applicazione Cora' Parquet Live}
\end{figure}

Per quanto riguarda i requisiti, essi sono stati suddivisi in 3 categorie: requisiti obbligatori, requisiti opzionali e requisiti desiderabili.\\\\
Segue ora una lista descrittiva dei principali requisiti. Il presente documento vuole garantire un discreto livello di dettaglio senza annoiare il lettore, per cui verranno elencate solo le funzionalita' principali.

\textbf{Requisiti obbligatori:}

\begin{itemize}
	\item L'applicazione deve dare la possibilita' all'utente di sfogliare una lista di categorie di prodotto, suddivise alla radice in  "Linea di prodotto" e "Colori", che permetteranno di accedere agli stessi prodotti in due modi diversi. La lista deve essere navigabile in entrambe le direzioni (da padre a figlio e da figlio a padre).
	
	\item L'applicazione deve dare la possibilita' all'utente di visualizzare i prodotti appartenenti a una certa categoria e deve dare la possibilita' di selezionarne uno da visualizzare in realta' aumentata.
	
	\item 
\end{itemize}


\subsubsection{Progettazione}
\subsubsection{Implementazione}
\subsubsection{Verifica e validazione}

\subsection{Livello di completezza raggiunto}